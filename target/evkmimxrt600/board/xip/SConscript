Import('sblprofile')
from building import *

group = []

if GetDepend('BOARD_FLASH_SUPPORT'):
    cwd = GetCurrentDir()
    src = Glob('*.c')
    CPPPATH = [cwd]

    if sblprofile.CROSS_TOOL == 'keil':
        LINKFLAGS  = ' --keep=*(CodeQuickAccess)'
        LINKFLAGS += ' --keep=*(.flash_conf)' 
        LINKFLAGS += ' --predefine="-DBOOT_HEADER_ENABLE=1"'
    else:
        LINKFLAGS = ''

    group = DefineGroup('xip', src, depend = [''], CPPPATH = CPPPATH, LINKFLAGS = LINKFLAGS) 

Return('group')
